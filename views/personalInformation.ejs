<%- include("templates/header") %>
<head>
    <title>change password</title>
    <link rel="stylesheet" href="/styles/profile.css">
</head>
<%- include("templates/navbar") %>
<div id="notification" class="alert notification hidden"></div>
<div class="container mt-5">
    <header class="d-flex align-items-center mb-4">
        <a id="btn-back" href="/profile" class="btn btn-outline-secondary me-3">
            <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M4.65419 7.95837H17.3334V10.0417H4.65419L10.2417 15.6292L8.76877 17.1021L0.666687 9.00003L8.76877 0.897949L10.2417 2.37087L4.65419 7.95837Z"
                      fill="black"/>
            </svg>
        </a>
        <span class="lang-text" data-key="editYourPersonalInformation">Edit Your Personal Information</span>
    </header>
    <main>
        <div class="alert secondary-color">
            <span class="lang-text" data-key="changeYourPersonalInformationTips">
                Edit your personal information here.
            </span>
        </div>
        <form method="POST" action="/postPersonalInformation" class="needs-validation" id="personalInformationForm"
              novalidate>
            <div class="mb-3">
                <label for="name" class="form-label"><span class="lang-text" data-key="name">
                    Name
                </span>:</label>
                <input name="name" id="name" type="text" class="form-control">
            </div>
            <div class="mb-3">
                <label for="email" class="form-label"><span class="lang-text" data-key="email">
                    Email
                </span>:</label>
                <input name="email" id="email" type="email" class="form-control">
            </div>
            <div class="mb-3">
                <label for="birthday" class="form-label"><span class="lang-text" data-key="birthday">
                    Birthday
                </span>:</label>
                <input name="birthday" id="birthday" type="date" class="form-control">
            </div>
            <div class="mb-3">
                <label for="height" class="form-label"><span class="lang-text" data-key="height">
                    Height (cm)
                </span>:</label>
                <input name="height" id="height" type="number" class="form-control">
            </div>
            <div class="mb-3">
                <label for="weight" class="form-label"><span class="lang-text" data-key="weight">
                    Weight (kg)
                </span>:</label>
                <input name="weight" id="weight" type="number" class="form-control">
            </div>
            <button type="submit" class="btn btn-primary primary-color primary-color-hover">Submit</button>
        </form>
    </main>
</div>
</body>
<script>
    document.getElementById('personalInformationForm').addEventListener('submit', function (event) {
        event.preventDefault();

        const form = event.target;
        const formData = new FormData(form);
        const notification = document.getElementById('notification');

        fetch(form.action, {
            method: form.method,
            body: JSON.stringify(Object.fromEntries(formData)),
            headers: {
                'Content-Type': 'application/json'
            }
        })
            .then(response => response.json())
            .then(data => {
                notification.style.display = 'block';
                if (data.success) {
                    notification.textContent = 'Submit successfully';
                    notification.classList.remove('alert-danger');
                    notification.classList.add('alert-success');
                } else {
                    notification.textContent = 'Submit failed';
                    notification.classList.remove('alert-success');
                    notification.classList.add('alert-danger');
                }
            })
            .catch(error => {
                notification.style.display = 'block';
                notification.textContent = 'Submit failed';
                notification.classList.remove('alert-success');
                notification.classList.add('alert-danger');
            });
    });
</script>
<%- include("templates/footer") %>
